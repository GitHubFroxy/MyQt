<!DOCTYPE html>
<html>
  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>地图演示</title>
      <script type="text/javascript" src="js/apiv1.3.min.js"></script>
      <!--script type="text/javascript" src="http://api.map.baidu.com/api?v=1.3"></script-->
      <link rel="stylesheet" type="text/css" href="bmap.css"/>
  </head>
  <body>
      <div style="left:0;top:0;width:100%;height:100%;position:absolute;" id="container"></div>
  </body>
</html>

<script type="text/javascript">
      var mapOptions = {
                      minZoom: 3,
                      maxZoom:19,
                      mapType:  BMAP_NORMAL_MAP
                    }

      var map = new BMap.Map("container",mapOptions);    // 设置卫星图为底图
      var point = new BMap.Point(116.468278, 39.922965);   // 创建点坐标
      map.centerAndZoom(point,13);                       // 初始化地图,设置中心点坐标和地图级别。

      //map.addControl(new BMap.MapTypeControl());		    //地图、卫星、三维显示
      //map.addControl(new BMap.OverviewMapControl({anchor: BMAP_ANCHOR_BOTTOM_LEFT, isOpen: true})); //缩略图控件
      //map.addControl(new BMap.NavigationControl({offset: new BMap.Size(10, 90)})); //地图平移缩放控件
      //map.enableScrollWheelZoom();                          // 启用滚轮放大缩小。
      //map.enableKeyboard();                                 // 启用键盘操作。
      //map.enableContinuousZoom();                           // 启用连续缩放

      var myIcon = new BMap.Icon("images/Point.png", new BMap.Size(20,25));
      var marker = new BMap.Marker(point,{icon:myIcon});   // 创建标注
      map.addOverlay(marker);                              // 加载标注
      //marker.setAnimation(BMAP_ANIMATION_BOUNCE);        //添加跳动动画
      //marker.enableDragging();							             //鼠标穿透
      var m_point;

      // 定义一个控件类，即function    
      function ZoomControl(){    
          // 设置默认停靠位置和偏移量  
          this.defaultAnchor = BMAP_ANCHOR_TOP_LEFT;    
          this.defaultOffset = new BMap.Size(10, 10);    
      }    
      // 通过JavaScript的prototype属性继承于BMap.Control   
      ZoomControl.prototype = new BMap.Control();

       //创建地图实例
      var myZoomCtrl = new ZoomControl();
      map.addControl(myZoomCtrl);

      var content = "<table>";
          content = content + "<tr><td> 船名:QIONGSANYA</td></tr>";
          content = content + "<tr><td> MMSI:433356743</td></tr>";
          content = content + "<tr><td> IMO :0</td></tr>";
          content = content + "<tr><td> 呼号:0</td></tr>";
          content = content + "<tr><td> 经度:109.450852</td></tr>";
          content = content + "<tr><td> 纬度:18.224768</td></tr>";
          content +="</table>";
       // 创建信息窗口对象 
      var infoWindow = new BMap.InfoWindow(content); 
      marker.addEventListener("mouseover", function(){          
          this.openInfoWindow(infoWindow); //开启信息窗口
        });
        marker.addEventListener("onmouseout", function(){          
          this.closeInfoWindow(infoWindow); //关闭信息窗口
        });
        marker.addEventListener("click", function(e){          
          ReinforcePC.getCoordinate(e.point.lng,e.point.lat);
          m_point = e.point;
        });


      var dragFlag = false;
      /*显示经纬度*/
      function showAddress(longjitude,latitude)
      {
         var gpsPoint = new BMap.Point(longjitude, latitude);

         if(!dragFlag)
         {
           map.panTo(gpsPoint);
         }
         marker.setPosition(gpsPoint);
      };

      //添加mark标记
      function addMarker(lot,lat,micon){		
		var mkIcon = new BMap.Icon(micon, new BMap.Size(20,25));
		var point = new BMap.Point(lot, lat);
		var mk = new BMap.Marker(point,{icon:mkIcon});   // 创建标注
		map.addOverlay(mk);                              // 加载标注
      };

      //返回目标点的经度和纬度
      function ReturnLngLat(){
          var LngLat = new Array();
          LngLat[0] = m_point.lng;
          LngLat[1] = m_point.lat;
          return LngLat;
      };

      map.addEventListener("mousemove",function(e)
      {
         //ReinforcePC.getCoordinate(e.point.lng,e.point.lat);

       });

      map.addEventListener("dragstart",function(e){
         dragFlag=true;

       });

      map.addEventListener("dragend",function(e){
         dragFlag=false;

       });

      map.addEventListener("zoomend",function(e){

       });

</script>
