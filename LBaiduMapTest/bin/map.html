<!DOCTYPE html>
<html>
  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>地图演示</title>
      <script type="text/javascript" src="js/apiv1.3.min.js"></script>
      <!--script type="text/javascript" src="http://api.map.baidu.com/api?v=1.3"></script-->
      <link rel="stylesheet" type="text/css" href="bmap.css"/>
  </head>
  <body>
      <div style="left:0;top:0;width:100%;height:100%;position:absolute;" id="container"></div>
  </body>
</html>

<script type="text/javascript">
      var mapOptions = {
                      minZoom: 3,
                      maxZoom:19,
                      mapType:  BMAP_NORMAL_MAP
                    }

      var map = new BMap.Map("container",mapOptions);    // 设置卫星图为底图
      var point = new BMap.Point(116.468278, 39.922965);   // 创建点坐标
      map.centerAndZoom(point,13);                       // 初始化地图,设置中心点坐标和地图级别。

      //map.addControl(new BMap.MapTypeControl());		    //地图、卫星、三维显示
      //map.addControl(new BMap.OverviewMapControl({anchor: BMAP_ANCHOR_BOTTOM_LEFT, isOpen: true})); //缩略图控件
      //map.addControl(new BMap.NavigationControl({offset: new BMap.Size(10, 90)})); //地图平移缩放控件
      //map.enableScrollWheelZoom();                          // 启用滚轮放大缩小。
      //map.enableKeyboard();                                 // 启用键盘操作。
      //map.enableContinuousZoom();                           // 启用连续缩放

      //var myIcon = new BMap.Icon("images/Point.png", new BMap.Size(20,25));
      //var marker = new BMap.Marker(point,{icon:myIcon});   // 创建标注
      //map.addOverlay(marker);                              // 加载标注
	  
	  //addMarker(116.468278, 39.922965,"images/ship_mark.png");
	  
	  
      //marker.setAnimation(BMAP_ANIMATION_BOUNCE);        //添加跳动动画
      //marker.enableDragging();							             //鼠标穿透

      // 定义一个控件类，即function    
      function ZoomControl(){    
          // 设置默认停靠位置和偏移量  
          this.defaultAnchor = BMAP_ANCHOR_TOP_LEFT;    
          this.defaultOffset = new BMap.Size(10, 10);    
      }    
      // 通过JavaScript的prototype属性继承于BMap.Control   
      ZoomControl.prototype = new BMap.Control();

       //创建地图实例
      var myZoomCtrl = new ZoomControl();
      map.addControl(myZoomCtrl);
	  
		function BMapOneMarker(lot,lat,shipName,mmsi){
			var opts={  
					width:80,
					height:40
						 //title:弹出层的标题
				};
							//创建信息窗口内容
			var content = "<table>";
				content = content + "<tr><td> 船名:"+ shipName + "</td></tr>";
				content = content + "<tr><td> MMSI:"+ mmsi + "</td></tr>";
				content +="</table>";
				
			var infoWindow=new BMap.InfoWindow(content,opts);//创建信息窗口对象 
			
			var mkIcon = new BMap.Icon("images/ship_mark.png", new BMap.Size(25,25));
			var point = new BMap.Point(lot, lat);
			var marker=new BMap.Marker(point,{icon:mkIcon});  
			map.addOverlay(marker);  
			marker.addEventListener("click",function(){  
				//map.openInfoWindow(infoWindow,point);//打开信息窗口  
				alert(content);
			});
			marker.addEventListener("mouseover",function(){
				map.openInfoWindow(infoWindow,point);//打开信息窗口
			});
			marker.addEventListener("onmouseout",function(){
				map.closeInfoWindow(infoWindow,point); //关闭信息窗口
			});
		};
	  
      map.addEventListener("mousemove",function(e)
      {
         //ReinforcePC.getCoordinate(e.point.lng,e.point.lat);

       });

      map.addEventListener("dragstart",function(e){
         dragFlag=true;

       });

      map.addEventListener("dragend",function(e){
         dragFlag=false;

       });

      map.addEventListener("zoomend",function(e){

       });

</script>
